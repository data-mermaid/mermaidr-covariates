[{"path":"https://data-mermaid.github.io/mermaidr-covariates/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2025 mermaidrcovariates authors Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://data-mermaid.github.io/mermaidr-covariates/articles/covariates.html","id":"load-packages","dir":"Articles","previous_headings":"","what":"Load packages","title":"Getting environmental covariates for GFCR locations","text":"Load libraries use analysis.","code":"# Need to run this to ensure that rstac works, because the API is missing \"type\" in Items: # remotes::install_github(\"sharlagelfand/rstac\", ref = \"invalid-item\")  # remotes::install_github(\"data-mermaid/mermaidr\") # remotes::install_github(\"data-mermaid/mermaidr-covariates\")  library(mermaidr) library(mermaidrcovariates) library(tidyverse)"},{"path":"https://data-mermaid.github.io/mermaidr-covariates/articles/covariates.html","id":"get-project-data-from-mermaid","dir":"Articles","previous_headings":"","what":"Get project data from MERMAID","title":"Getting environmental covariates for GFCR locations","text":"first step get coral cover data GFCR projects MERMAID. following gets summary sample events, filters projects whose tags contain “GFCR”, projects hard coral cover data.","code":"summary_sampleevents <- mermaid_get_summary_sampleevents()  gfcr_summary_sampleevents <- summary_sampleevents %>%   filter(str_detect(tags, \"GFCR\")) %>%   filter(!is.na(`benthicpit_percent_cover_benthic_category_avg_Hard coral`)) %>%   rename(hard_coral_cover = `benthicpit_percent_cover_benthic_category_avg_Hard coral`)  gfcr_summary_sampleevents ## # A tibble: 73 × 380 ##    project_id      project tags  country site_id site  latitude longitude reef_type ##    <chr>           <chr>   <chr> <chr>   <chr>   <chr>    <dbl>     <dbl> <chr>     ##  1 8a747031-4ebd-… Invest… Unit… Fiji    2ecee0… GA1      -16.5      179. barrier   ##  2 8a747031-4ebd-… Invest… Unit… Fiji    4f1394… GA2      -16.5      179. barrier   ##  3 8a747031-4ebd-… Invest… Unit… Fiji    f3ae80… GA3      -16.5      179. barrier   ##  4 8a747031-4ebd-… Invest… Unit… Fiji    35cbcc… GA4      -16.6      179. barrier   ##  5 8a747031-4ebd-… Invest… Unit… Fiji    53220e… GA5      -16.6      179. barrier   ##  6 8a747031-4ebd-… Invest… Unit… Fiji    2f53e7… GA6      -16.6      179. fringing  ##  7 8a747031-4ebd-… Invest… Unit… Fiji    4e28c5… QR1      -16.1      180. barrier   ##  8 8a747031-4ebd-… Invest… Unit… Fiji    14b477… QR2      -16.1      180. barrier   ##  9 8a747031-4ebd-… Invest… Unit… Fiji    687440… QR3      -16.2      180. barrier   ## 10 8a747031-4ebd-… Invest… Unit… Fiji    fd9428… QR4      -16.2      180. barrier   ## # ℹ 63 more rows ## # ℹ 371 more variables: reef_zone <chr>, reef_exposure <chr>, management_id <chr>, ## #   management <chr>, management_est_year <int>, management_size <dbl>, ## #   management_parties <chr>, management_compliance <chr>, management_rules <chr>, ## #   sample_date <date>, data_policy_beltfish <chr>, data_policy_benthiclit <chr>, ## #   data_policy_benthicpit <chr>, data_policy_benthicpqt <chr>, ## #   data_policy_habitatcomplexity <chr>, data_policy_bleachingqc <chr>, …"},{"path":"https://data-mermaid.github.io/mermaidr-covariates/articles/covariates.html","id":"summary-of-hard-coral-cover-for-projects","dir":"Articles","previous_headings":"Get project data from MERMAID","what":"Summary of hard coral cover for projects","title":"Getting environmental covariates for GFCR locations","text":"Summarise projects show tags, country, number sites, average hard coral cover.","code":"gfcr_summary_sampleevents %>%   group_by(project, tags, country) %>%   summarise(     n_sites = length(site),     average_hard_coral_cover = mean(hard_coral_cover), .groups = \"drop\"   ) ## # A tibble: 6 × 5 ##   project                              tags  country n_sites average_hard_coral_c…¹ ##   <chr>                                <chr> <chr>     <int>                  <dbl> ## 1 Investing in Coral Reefs and the Bl… Unit… Fiji         27                  38.0  ## 2 Maldives RREEF (GFCR)                Glob… Maldiv…      11                  43.4  ## 3 SLCRI Bar Reef Seascape              Inte… Sri La…      11                   9.68 ## 4 SLCRI Kayankerni Seascape            Glob… Sri La…      11                  44.4  ## 5 SLCRI Pigeon Island Seascape         Glob… Sri La…       7                  55.9  ## 6 Terumbu Karang Sehat Indonesia Prog… Cons… Indone…       6                  53.7  ## # ℹ abbreviated name: ¹​average_hard_coral_cover"},{"path":"https://data-mermaid.github.io/mermaidr-covariates/articles/covariates.html","id":"get-covariates-for-these-sites","dir":"Articles","previous_headings":"","what":"Get covariates for these sites","title":"Getting environmental covariates for GFCR locations","text":"Next, get relevant covariates sites.","code":""},{"path":"https://data-mermaid.github.io/mermaidr-covariates/articles/covariates.html","id":"list-stac-collections","dir":"Articles","previous_headings":"Get covariates for these sites","what":"List STAC collections","title":"Getting environmental covariates for GFCR locations","text":"List available STAC collections. available monthly aggregation Degree Heating Weeks (DHW).","code":"list_collections() ## $`noaa-monthly-max-dhw` ## ###Collection ## - id: noaa-monthly-max-dhw ## - title: NOAA Degree Heating Week (DHW) - Monthly Aggregation ## - description:  ## The NOAA Coral Reef Watch (CRW) daily global 5km satellite coral bleaching Degree Heating Week (DHW) product shows accumulated heat stress, which can lead to coral bleaching and death. The scale ranges from 0 to 20 °C-weeks. The DHW product accumulates the instantaneous bleaching heat stress, measured by CRW's Coral Bleaching HotSpot, during the most recent 12-week period. It is directly related to the timing and intensity of coral bleaching. ## - field(s):  ## type, id, stac_version, description, links, stac_extensions, title, extent, license, keywords, providers, summaries"},{"path":"https://data-mermaid.github.io/mermaidr-covariates/articles/covariates.html","id":"get-maximum-dhw-for-previous-year","dir":"Articles","previous_headings":"Get covariates for these sites","what":"Get maximum DHW for previous year","title":"Getting environmental covariates for GFCR locations","text":"Focus degree heating weeks (DHW), get max (monthly average) 365 days prior survey data. Review survey data: summary_zonal_stats() function takes site latitude longitude, well survey date, find data site n days prior, aggregates . buffer size set 1000 metres. Look returned data, keeping project information, site, survey date, hard coral cover, covariates.","code":"gfcr_summary_sampleevents %>%   distinct(project, site, latitude, longitude, sample_date) ## # A tibble: 73 × 5 ##    project                                     site  latitude longitude sample_date ##    <chr>                                       <chr>    <dbl>     <dbl> <date>      ##  1 Investing in Coral Reefs and the Blue Econ… GA1      -16.5      179. 2025-10-08  ##  2 Investing in Coral Reefs and the Blue Econ… GA2      -16.5      179. 2025-10-08  ##  3 Investing in Coral Reefs and the Blue Econ… GA3      -16.5      179. 2025-10-09  ##  4 Investing in Coral Reefs and the Blue Econ… GA4      -16.6      179. 2025-10-09  ##  5 Investing in Coral Reefs and the Blue Econ… GA5      -16.6      179. 2025-10-08  ##  6 Investing in Coral Reefs and the Blue Econ… GA6      -16.6      179. 2025-10-08  ##  7 Investing in Coral Reefs and the Blue Econ… QR1      -16.1      180. 2025-09-24  ##  8 Investing in Coral Reefs and the Blue Econ… QR2      -16.1      180. 2025-09-24  ##  9 Investing in Coral Reefs and the Blue Econ… QR3      -16.2      180. 2025-09-24  ## 10 Investing in Coral Reefs and the Blue Econ… QR4      -16.2      180. 2025-09-25  ## # ℹ 63 more rows max_dhw <- gfcr_summary_sampleevents %>%   summary_zonal_stats(\"noaa-monthly-max-dhw\", n_days = 365, buffer = 1000, stats = \"max\") max_dhw <- max_dhw %>%   select(site, sample_date, hard_coral_cover, covariates)  max_dhw ## # A tibble: 73 × 4 ##    site  sample_date hard_coral_cover covariates       ##    <chr> <date>                 <dbl> <list>           ##  1 GA1   2025-10-08              62.3 <tibble [1 × 6]> ##  2 GA2   2025-10-08              31.2 <tibble [1 × 6]> ##  3 GA3   2025-10-09              24.6 <tibble [1 × 6]> ##  4 GA4   2025-10-09              42.6 <tibble [1 × 6]> ##  5 GA5   2025-10-08              11.5 <tibble [1 × 6]> ##  6 GA6   2025-10-08              57.4 <tibble [1 × 6]> ##  7 QR1   2025-09-24              27.9 <tibble [1 × 6]> ##  8 QR2   2025-09-24              96.7 <tibble [1 × 6]> ##  9 QR3   2025-09-24              77.0 <tibble [1 × 6]> ## 10 QR4   2025-09-25              13.1 <tibble [1 × 6]> ## # ℹ 63 more rows"},{"path":"https://data-mermaid.github.io/mermaidr-covariates/articles/covariates.html","id":"expand-covariates","dir":"Articles","previous_headings":"Get covariates for these sites","what":"Expand covariates","title":"Getting environmental covariates for GFCR locations","text":"covariates currently format need expanded. , can see contain start end date data used covariates, band, summarised value.","code":"max_dhw <- max_dhw %>%   unnest(covariates)  max_dhw ## # A tibble: 73 × 9 ##    site  sample_date hard_coral_cover covariate            start_date end_date   ##    <chr> <date>                 <dbl> <chr>                <date>     <date>     ##  1 GA1   2025-10-08              62.3 noaa-monthly-max-dhw 2024-11-01 2025-04-01 ##  2 GA2   2025-10-08              31.2 noaa-monthly-max-dhw 2024-11-01 2025-04-01 ##  3 GA3   2025-10-09              24.6 noaa-monthly-max-dhw 2024-11-01 2025-04-01 ##  4 GA4   2025-10-09              42.6 noaa-monthly-max-dhw 2024-11-01 2025-04-01 ##  5 GA5   2025-10-08              11.5 noaa-monthly-max-dhw 2024-11-01 2025-04-01 ##  6 GA6   2025-10-08              57.4 noaa-monthly-max-dhw 2024-11-01 2025-04-01 ##  7 QR1   2025-09-24              27.9 noaa-monthly-max-dhw 2024-10-01 2025-04-01 ##  8 QR2   2025-09-24              96.7 noaa-monthly-max-dhw 2024-10-01 2025-04-01 ##  9 QR3   2025-09-24              77.0 noaa-monthly-max-dhw 2024-10-01 2025-04-01 ## 10 QR4   2025-09-25              13.1 noaa-monthly-max-dhw 2024-10-01 2025-04-01 ##     band statistic value ##    <dbl> <chr>     <dbl> ##  1     1 max        4.86 ##  2     1 max        4.80 ##  3     1 max        4.80 ##  4     1 max        5.82 ##  5     1 max        6.81 ##  6     1 max        6.81 ##  7     1 max        2.96 ##  8     1 max        2.96 ##  9     1 max        2.47 ## 10     1 max        2.48 ## # ℹ 63 more rows"},{"path":"https://data-mermaid.github.io/mermaidr-covariates/articles/covariates.html","id":"visualize","dir":"Articles","previous_headings":"","what":"Visualize","title":"Getting environmental covariates for GFCR locations","text":"Finally, visualize coral cover maximum mean DHW past 365 days.","code":"ggplot(   max_dhw,   aes(     x = value,     y = hard_coral_cover   ) ) +   geom_point(color = \"darkblue\", alpha = 0.6) +   geom_smooth(method = \"lm\", color = \"red\", linetype = \"dashed\") +   labs(     title = paste(\"Coral Cover vs. Max. DHW (Previous 365 Days)\"),     x = \"Maximum DHW\",     y = \"Hard Coral Cover (%)\"   ) +   theme_minimal()"},{"path":"https://data-mermaid.github.io/mermaidr-covariates/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Sharla Gelfand. Author, maintainer. Wildlife Conservation Society. Copyright holder, funder.","code":""},{"path":"https://data-mermaid.github.io/mermaidr-covariates/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Gelfand S (2026). mermaidrcovariates: Access covariates MERMAID data. R package version 0.0.01, https://data-mermaid.github.io/mermaidr-covariates/.","code":"@Manual{,   title = {mermaidrcovariates: Access covariates for MERMAID data},   author = {Sharla Gelfand},   year = {2026},   note = {R package version 0.0.01},   url = {https://data-mermaid.github.io/mermaidr-covariates/}, }"},{"path":"https://data-mermaid.github.io/mermaidr-covariates/index.html","id":"mermaidrcovariates","dir":"","previous_headings":"","what":"Access covariates for MERMAID data","title":"Access covariates for MERMAID data","text":"goal mermaidrcovariates easily access covariates data add MERMAID data. information detailed instructions usage, please visit package website. details using mermaidr general, please see mermaidr package website.","code":""},{"path":"https://data-mermaid.github.io/mermaidr-covariates/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Access covariates for MERMAID data","text":"can install mermaidrcovariates GitHub :","code":"# install.packages(\"remotes\") remotes::install_github(\"data-mermaid/mermaidr-covariates\")"},{"path":"https://data-mermaid.github.io/mermaidr-covariates/index.html","id":"usage","dir":"","previous_headings":"","what":"Usage","title":"Access covariates for MERMAID data","text":"mermaidrcovariates, can easily add covariates aggregated data coral reef surveys, already entered MERMAID. , first load mermaidrcovariates mermaid packages, access sample events given project. example, work hard coral cover data, available Benthic PIT method. get covariates, need sample event’s date well latitude longitude. keep columns along site name average hard coral cover, using tidyverse package data manipulation. get covariates sites, need know data available. find using list_collections() function: monthly aggregation Degree Heating Weeks (DHW) available. can access data using id, noaa-monthly-max-dhw, function summary_zonal_stats(). summary_zonal_stats() function takes site latitude longitude, well survey date, find data site n days prior, aggregates . access maximum DHW (monthly average) 365 days prior survey data, using buffer size 1000 metres: covariates returned format need expanded. , can see contain start end date data used covariates, band, summarised value. data can analysed along hard coral cover, shown detail example analysis, Getting environmental covariates GFCR locations.","code":"library(mermaidrcovariates) library(mermaidr)  se <- mermaid_search_my_projects(\"Great Sea Reef 2019\") %>%   mermaid_get_project_data(\"benthicpit\", data = \"sampleevents\") library(tidyverse)  se <- se %>%   select(site, sample_date, latitude, longitude, hard_coral_cover = percent_cover_benthic_category_avg_hard_coral) list_collections() #> $`noaa-monthly-max-dhw` #> ###Collection #> - id: noaa-monthly-max-dhw #> - title: NOAA Degree Heating Week (DHW) - Monthly Aggregation #> - description:  #> The NOAA Coral Reef Watch (CRW) daily global 5km satellite coral bleaching Degree Heating Week (DHW) product shows accumulated heat stress, which can lead to coral bleaching and death. The scale ranges from 0 to 20 °C-weeks. The DHW product accumulates the instantaneous bleaching heat stress, measured by CRW's Coral Bleaching HotSpot, during the most recent 12-week period. It is directly related to the timing and intensity of coral bleaching. #> - field(s):  #> type, id, stac_version, description, links, stac_extensions, title, extent, license, keywords, providers, summaries max_dhw <- se %>%   summary_zonal_stats(\"noaa-monthly-max-dhw\", n_days = 365, buffer = 1000, stats = \"max\") max_dhw %>%   unnest(covariates) #> # A tibble: 72 × 11 #>    site  sample_date latitude longitude hard_coral_cover covariate            #>    <chr> <date>         <dbl>     <dbl>            <dbl> <chr>                #>  1 BA09  2019-09-26     -17.4      178.             12.3 noaa-monthly-max-dhw #>  2 BA16  2019-09-27     -17.2      178.             10.7 noaa-monthly-max-dhw #>  3 GS03  2019-10-08     -16.4      178.             52   noaa-monthly-max-dhw #>  4 BA15  2019-09-27     -17.2      178.             25   noaa-monthly-max-dhw #>  5 YA02  2019-09-30     -17.0      177.             26.3 noaa-monthly-max-dhw #>  6 LW04  2019-09-25     -17.6      177.             11.7 noaa-monthly-max-dhw #>  7 IP3.5 2019-10-04     -16.4      179.             52.3 noaa-monthly-max-dhw #>  8 BA11  2019-09-27     -17.3      178.             23   noaa-monthly-max-dhw #>  9 GS05  2019-10-08     -16.4      178.             40.3 noaa-monthly-max-dhw #> 10 YQ02  2019-10-03     -16.6      179.             59   noaa-monthly-max-dhw #>    start_date end_date    band statistic value #>    <date>     <date>     <dbl> <chr>     <dbl> #>  1 2018-10-01 2019-09-01     1 max        8.36 #>  2 2018-10-01 2019-09-01     1 max        8.24 #>  3 2018-11-01 2019-10-01     1 max        5.96 #>  4 2018-10-01 2019-09-01     1 max        8.24 #>  5 2018-10-01 2019-09-01     1 max        8.79 #>  6 2018-10-01 2019-09-01     1 max       11.3  #>  7 2018-11-01 2019-10-01     1 max        4.25 #>  8 2018-10-01 2019-09-01     1 max        8.57 #>  9 2018-11-01 2019-10-01     1 max        6.30 #> 10 2018-11-01 2019-10-01     1 max        8.25 #> # ℹ 62 more rows"},{"path":"https://data-mermaid.github.io/mermaidr-covariates/reference/list_collections.html","id":null,"dir":"Reference","previous_headings":"","what":"List available collections — list_collections","title":"List available collections — list_collections","text":"List available collections","code":""},{"path":"https://data-mermaid.github.io/mermaidr-covariates/reference/list_collections.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"List available collections — list_collections","text":"","code":"list_collections()"},{"path":"https://data-mermaid.github.io/mermaidr-covariates/reference/list_collections.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"List available collections — list_collections","text":"","code":"list_collections() #> $`noaa-monthly-max-dhw` #> ###Collection #> - id: noaa-monthly-max-dhw #> - title: NOAA Degree Heating Week (DHW) - Monthly Aggregation #> - description:  #> The NOAA Coral Reef Watch (CRW) daily global 5km satellite coral bleaching Degree Heating Week (DHW) product shows accumulated heat stress, which can lead to coral bleaching and death. The scale ranges from 0 to 20 °C-weeks. The DHW product accumulates the instantaneous bleaching heat stress, measured by CRW's Coral Bleaching HotSpot, during the most recent 12-week period. It is directly related to the timing and intensity of coral bleaching. #> - field(s):  #> type, id, stac_version, description, links, stac_extensions, title, extent, license, keywords, providers, summaries #>"},{"path":"https://data-mermaid.github.io/mermaidr-covariates/reference/pipe.html","id":null,"dir":"Reference","previous_headings":"","what":"Pipe operator — %>%","title":"Pipe operator — %>%","text":"See magrittr::%>% details.","code":""},{"path":"https://data-mermaid.github.io/mermaidr-covariates/reference/pipe.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Pipe operator — %>%","text":"","code":"lhs %>% rhs"},{"path":"https://data-mermaid.github.io/mermaidr-covariates/reference/pipe.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Pipe operator — %>%","text":"lhs value magrittr placeholder. rhs function call using magrittr semantics.","code":""},{"path":"https://data-mermaid.github.io/mermaidr-covariates/reference/pipe.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Pipe operator — %>%","text":"result calling `rhs(lhs)`.","code":""},{"path":"https://data-mermaid.github.io/mermaidr-covariates/reference/summary_zonal_stats.html","id":null,"dir":"Reference","previous_headings":"","what":"Get summary of zonal statistics — summary_zonal_stats","title":"Get summary of zonal statistics — summary_zonal_stats","text":"Get summary zonal statistics","code":""},{"path":"https://data-mermaid.github.io/mermaidr-covariates/reference/summary_zonal_stats.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get summary of zonal statistics — summary_zonal_stats","text":"","code":"summary_zonal_stats(   df,   collection,   n_days = 365,   buffer = 1000,   stats = c(\"min\", \"max\", \"mean\") )"},{"path":"https://data-mermaid.github.io/mermaidr-covariates/reference/summary_zonal_stats.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get summary of zonal statistics — summary_zonal_stats","text":"df Sample events mermaidr collection Covariates get statistics n_days Number days prior sample date get statistics . Defaults 365. buffer Buffer around site location, metres. Defaults 1000. stats Summary statistics. One : min, max, mean.","code":""},{"path":"https://data-mermaid.github.io/mermaidr-covariates/reference/summary_zonal_stats.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get summary of zonal statistics — summary_zonal_stats","text":"","code":"# TODO"}]
